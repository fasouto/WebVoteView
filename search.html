<!DOCTYPE html>
<html lang="en">
<head>
    
	<title>Vote View</title>
	
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">

	<link rel="shortcut icon" href="docs-assets/ico/favicon.png">
	<link rel="shortcut icon" type="image/ico" href="">

	<link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/webvoteview.css" media="all" rel="stylesheet" type="text/css" />
    <link href="css/map.css" media="all" rel="stylesheet" type="text/css" />
    <link href="css/scatter.css" media="all" rel="stylesheet" type="text/css" />

	<link href="css/bootstrap-theme.min.css" rel="stylesheet">
	<link href="css/jumbotron-narrow.css" rel="stylesheet">
	<link href="css/jquery.dataTables.css" rel="stylesheet">

    <link rel="stylesheet" href="css/app.css">	
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/font-awesome.css">
    <link rel="stylesheet" href="css/flexslider.css" type="text/css" media="screen">          
    <link rel="stylesheet" href="css/default.css" id="style_color">
	
	<link href="css/lightbox.css" rel="stylesheet" />
	<link href="css/image.change.css" rel="stylesheet" />
	
	<script src="js/libs/jquery-1.10.2.min.js"></script>
	<script src="js/libs/lightbox-2.6.min.js"></script>

    <script src="js/libs/jquery-2.0.3.min.js"></script>
	<script src="js/libs/jquery.sprintf.js"></script> 
	<script src="js/libs/jquery.dataTables.min.js"></script>   
	<script src="js/libs/bootstrap.min.js"></script>
	<script src="js/libs/sprintf.min.js"></script>
 	        
    <script src="js/libs/d3.v3.min.js"></script>
    <script src="js/libs/queue.v1.min.js"></script>
    <script src="js/libs/topojson.v1.min.js"></script>
    <script src="js/map.js"></script>
    <script src="js/scatter.js"></script>
    <script src="js/bar.js"></script>
    <script src="js/webvoteview.js"></script>
	
	<script type="text/javascript" src="js/libs/jquery-migrate-1.2.1.min.js"></script>
	<script type="text/javascript" src="js/libs/jquery.flexslider-min.js"></script>
	<script type="text/javascript" src="js/app.js"></script>
    <script type="text/javascript" src="js/libs/button.js"></script>	

	<script type="text/javascript" charset="utf-8">
  
    // set the page view (there must be much more jquery-ish way to do this!)
	setview = function(v) {
	   switch(v) {
	      case "results":
	          $("#results").show();
	          $("#visualize").hide();
	          $("#search").hide();
	          $("#home").hide();
			  $("#about").hide();
	          break;
	      case "visualize":
	          $("#results").hide();
	          $("#visualize").show();
	          $("#search").hide();
	          $("#home").hide();
			  $("#about").hide();
              break;
	      case "search":
	          $("#results").hide();
	          $("#visualize").hide();
	          $("#search").show();
	          $("#home").hide();
			  $("#about").hide();
              break;
	      case "home":
	          $("#results").hide();
	          $("#visualize").hide();
	          $("#search").hide();
	          $("#home").show();
			  $("#about").hide();
              break;
		  case "about":
	          $("#results").hide();
	          $("#visualize").hide();
	          $("#search").hide();
	          $("#home").hide();
			  $("#about").show();
              break;
	  }
	}

	$(document).ready(function() {
	    setview("home");
	});
	
    var resultids = []; // container for search result ids to use in download

	makeTable = function(query) {
	    var q = encodeURIComponent(query);
	    $('#example').dataTable({
	        "oLanguage": {"sSearch": "Filter results:"},
	        "bProcessing": true,
	        "bDestroy":true,
	        "sAjaxSource": $.sprintf('http://leela.sscnet.ucla.edu/voteview/searchdt?q=%s',q),
	        "aoColumns":[{"mData":"id", "sWidth": "20px", "sTitle":"ID"},
	                       {"mData":"chamber", "sWidth": "10px", "sTitle":"Chamber"},
	                       {"mData":"date", "sWidth": "85px", "sTitle":"Date"},
	                       {"mData":"yea","sTitle":"Vote","sWidth":"80px"},
	                                               {"mData":"descriptionShort", "sWidth": "200px","sTitle":"Description"}],
	        "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
	                                               $('td:eq(0)', nRow).html(
	                            $.sprintf('<a onclick="setviz(\'%s\');setview(\'visualize\')">%s</a>',aData['id'],aData['id'])).attr("title", "Click to explore this vote");
	                                               $('td:eq(3)', nRow).html(
	                            $.sprintf('%s-%s',aData['yea'],aData['no']));
	                            $('td:eq(4)', nRow).attr("title",aData['description']);
                                    resultids.push(aData['id']); // build vector vote ids (nothing to do with the table)
	                            return nRow; },
			
			"fnInitComplete": function(oSettings, json) {
            $('#downloadExcel').click(function() {
                  window.location = 'http://leela.sscnet.ucla.edu/voteview/download?ids=' + resultids.join(); // Make download BUTTON!
            	})   
			}

			});         
	}
	
	searchvotes = function() {
	   $('#example').empty();
	   makeTable($('#qqtext').val());
	};
        
        var wvv;  //not sure if this needs to be in the global env
        setviz = function(id) {
           var chamber = id.substr(0,1);
           var session = parseInt(id.substr(1,3),10);
           var rcnum = parseInt(id.substr(4,7),10);
  	   wvv = new WebVoteView({
                            'chamber': chamber,
                            'session': session,
                            'rcnum': rcnum,
                            'showDescription': true,
                            'bar': {'element': 'bar'},
                            'map': {'element': 'map'},
                            'scatter': {'element': 'scatter'}
                        });
	};
	
	$(function(){
    var $btn = $('#downloadExcel');
	    $btn.click(function(){
        	var $this = $(this);
    	    $this.attr('disabled', 'disabled').html("Loading...");
	        setTimeout(function () {
            	$this.removeAttr('disabled').html('Download complete!');
        	}, 5000)
    	});
	})
	
	$(document).ready(function() {
		$('.smallerOne').click(function(){
    		var bigCont = $('.bigOne').html();
		    var smallCont = $(this).html();
  
	    	$('.bigOne').html(smallCont);
	    	$(this).html(bigCont); 
		 });
	 });

	</script>
	
	</head>
	
	<body>
    
	<div class="container">
		<div class="header">
		<ul class="nav nav-pills pull-right">
          <li><a onclick="setview('home')">Home</a></li>
          <li><a onclick="setview('about')">About Us</a></li>
          <li><a href="jblewis@ucla.edu">Contact</a></li>
        </ul>
      	<h3 class="text-muted">www.voteview.com</h3>
    	</div><!-- container -->
	</div><!-- header -->
	
    <!-- HOME PAGE DIV -->
    <div id="home">
      <div class="jumbotron">
        <h1>VoteView</h1>
        <p class="lead">Search, explore and visualize U.S. Roll Calls</p><p></p>
		<div align="center">
			<a class="btn btn-primary btn-lg" onclick="setview('search')" role="button"><span class="glyphicon glyphicon-search"></span><br>Search</a>
			<a class="btn btn-success btn-lg" onclick="setview('results')" role="button"><span class="glyphicon glyphicon-list"></span><br>Results</a>
			<a class="btn btn-warning btn-lg" onclick="setview('visualize')" role="button"><span class="glyphicon glyphicon-eye-open"></span><br>&#160 View &#160</a>
		</div><!-- buttons -->
      <br>
	</div><!-- jumbotron -->

	<div class="section">
      <div class="container">
        <div class="row">
          <div class="col-lg-4 col-md-4">
            <h3><i class="glyphicon glyphicon-check"></i>&#160 Check this Out!</h3>
            <p>Donec id elit non mi porta gravida at eget metus. Maecenas faucibus mollis interdum. Donec id elit non mi porta gravida at eget metus. Maecenas faucibus mollis interdum. Donec id elit non mi porta gravida at eget metus. Maecenas faucibus mollis interdum.</p>
          </div><!-- ad 1 -->
          <div class="col-lg-4 col-md-4"><!-- HOME PAGE DIV -->
            <h3><i class="glyphicon glyphicon-stats"></i>&#160 Analyze Data</h3>
            <p>Donec id elit non mi porta gravida at eget metus. Maecenas faucibus mollis interdum. Donec id elit non mi porta gravida at eget metus. Maecenas faucibus mollis interdum. Donec id elit non mi porta gravida at eget metus. Maecenas faucibus mollis interdum.</p>
          </div><!-- ad 2 -->
          <div class="col-lg-4 col-md-4">
            <h3><i class="glyphicon glyphicon-thumbs-up"></i>&#160 Publicize It!</h3>
            <p>Donec id elit non mi porta gravida at eget metus. Maecenas faucibus mollis interdum. Donec id elit non mi porta gravida at eget metus. Maecenas faucibus mollis interdum. Donec id elit non mi porta gravida at eget metus. Maecenas faucibus mollis interdum.</p>
          </div><!-- ad 3 -->
        </div><!-- row -->
      </div><!-- container -->
    </div><!-- section -->
	</div><!-- home -->


	<!-- ABOUT -->
	<div id='about'>
		<div class="container">		
			<div class="headline"><h2>Our Team</h2></div>
				<div class="row team">
					<div class="col-sm-3">
						<div class="thumbnail-style">
							<img class="img-responsive" src="img/team/jeff.jpeg" alt="" />
							<h3><a>Jeff Lewis</a> <small>King and Boss</small></h3>
							<p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, justo sit amet risus etiam porta sem...</p>
							<ul class="list-unstyled list-inline team-socail">
								<li><a href="#"><i class="icon-facebook"></i></a></li>
								<li><a href="#"><i class="icon-twitter"></i></a></li>
								<li><a href="#"><i class="icon-google-plus"></i></a></li>
                			</ul>
            			</div><!-- thumbnail -->
					</div><!-- col-sm-3 -->

        			<div class="col-sm-3">
						<div class="thumbnail-style">
						<img class="img-responsive" src="img/team/3.jpg" alt="" />
                <h3><a>Sir Else</a> <small>Project Manager</small></h3>
                <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, justo sit amet risus etiam porta sem...</p>
                <ul class="list-unstyled list-inline team-socail">
                	<li><a href="#"><i class="icon-facebook"></i></a></li>
                	<li><a href="#"><i class="icon-twitter"></i></a></li>
                	<li><a href="#"><i class="icon-google-plus"></i></a></li>
                </ul>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="thumbnail-style">
                <img class="img-responsive" src="img/team/2.jpg" alt="" />
                <h3><a>Ted Alonso</a> <small>VP of Operations</small></h3>
                <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, justo sit amet risus etiam porta sem...</p>
                <ul class="list-unstyled list-inline team-socail">
                	<li><a href="#"><i class="icon-facebook"></i></a></li>
                	<li><a href="#"><i class="icon-twitter"></i></a></li>
                	<li><a href="#"><i class="icon-google-plus"></i></a></li>
                </ul>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="thumbnail-style">
                <img class="img-responsive" src="img/team/4.jpg" alt="" />
                <h3><a>kobe Bryan</a> <small>Director, R &amp; D Talent</small></h3>
                <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, justo sit amet risus etiam porta sem...</p>
                <ul class="list-unstyled list-inline team-socail">
                	<li><a href="#"><i class="icon-facebook"></i></a></li>
                	<li><a href="#"><i class="icon-twitter"></i></a></li>
                	<li><a href="#"><i class="icon-google-plus"></i></a></li>
                </ul>
            		</div>
        		</div>
		    </div><!--/team-->
			<br>
			
		<div class="row margin-bottom-30" align="justify">
    			<div class="col-md-6 md-margin-bottom-40">
		            <p>VoteView is a central website which archives, maintains, and distributes datasets of roll-call voting from the United States House of Representative and Senate. The data covers the entire history of Congress from 1789 until the present. Researchers from all over the world are able to access this unique website to download data, visualize preliminary information about each roll-call vote in history, and analyze the distribution of votes across the United States. The main mission of this project is to create an interface where it could be used actively by undergraduates across the country and by high school students. This website will also serve an important archival purpose. After the development of the Nominate scaling method by Poole and Rosenthal in the 1980s, the assembly of large legislative roll call datasets "took off". These datasets have permanent value to the research community. It is important to find a means of institutionalizing their availability in order that access will transcend the research careers of the scholars who have assembled them. </p>
						
						<blockquote>
							<p>More than 1,000,000 accessed our website in the last 100 years!</p>
							<small>UCLA Dean Bla Bla</small>
						</blockquote>
        		</div><!-- col-md-6 -->
			</div><!-- /row-->
			
		</div><!--/container-->		
    </div>


    <!-- SEARCH PANEL -->
	<div class="container">    
		<div id='search'>
    		<div class="jumbotron">
  				<div class="form-group">
    				<label for="exampleInputEmail1"><h3>Search for Roll Calls</h3></label>
	    			<input type="search" class="form-control" placeholder="Search" id="qqtext" onchange="setview('results');searchvotes()"></input><br>
					<div align="center" data-toggle="buttons">
						<a class="btn btn-primary btn-lg" onclick="setview('search')" role="button"><span class="glyphicon glyphicon-search"></span><br>Search</a>
						<a class="btn btn-success btn-lg" onclick="setview('results')" role="button"><span class="glyphicon glyphicon-list"></span><br>Results</a>
						<a class="btn btn-warning btn-lg" onclick="setview('visualize')" role="button"><span class="glyphicon glyphicon-eye-open"></span><br>&#160 View &#160</a><br>
					</div><!-- buttons -->			
				</div><!-- form -->
     		</div><!-- jumbotron -->
    	</div><!-- search -->
	</div><!-- container -->
	
	
    <!-- RESULTS PANEL -->
    <div id='results'>
		<div class="jumbotron">	
			<div class="container special">
				<div class="table">
					<table id="example" class="table table-striped"></table><br/><br>
					<button id="downloadExcel" type="button" data-loading-text="Loading..." class="btn btn-danger"><span class="glyphicon glyphicon-circle-arrow-down"></span>&#160 Download</button><br/>
					<br/>

					<div align="center" data-toggle="buttons">
						<a class="btn btn-primary btn-lg" onclick="setview('search')" role="button"><span class="glyphicon glyphicon-search"></span><br>Search</a>
						<a class="btn btn-success btn-lg" onclick="setview('results')" role="button"><span class="glyphicon glyphicon-list"></span><br>Results</a>
						<a class="btn btn-warning btn-lg" onclick="setview('visualize')" role="button"><span class="glyphicon glyphicon-eye-open"></span><br>&#160 View &#160</a>
					</div><!-- buttons -->
				</div><!-- table -->
			</div><!-- container -->
			
		</div><!-- jumbotron -->	
    </div><!-- results -->


    <!-- VISUALIZE PANEL -->
    <div id='visualize'>
		<div class="container">
    		<div class="panel panel-default">
      			<div class="panel-heading" id="wvv-rollcall"><b></b></div><!-- title -->
	        	<div class="panel-body" id="wvv-description"></div><!-- description -->
	        	<div class="panel-body" id="wvv-date"></div><!-- date -->
	    	</div><!-- panel -->

	    	<div class="bs-example">
				<table class="table">
		 	       <thead>
        	  			<tr>
				            <th>ID</th>
            				<th>Description</th>
			           	 	<th>Yea</th>
            				<th>Nay</th>
		        	    </tr>
        		   </thead>
	        		<tbody>
    	    		<tr>
            			<td id="idrollcall"></td>
            			<td id="summary" class="col-lg-14"></td>
            			<td id="yes"></td>
            			<td id="nay"></td>
          			</tr>
        			</tbody>
      			</table>
    		</div><!-- summary -->
		<br><br><br>
		
		<!-- Example Set of Images 1 -->
	    <div class="bs-example">
      		<div class="row">

        		<div class="col-sm-4 col-md-4">
          			<div class="thumbnail">
            			<div id="map-container">
							<a class="img-thumbnail" data-lightbox="roadtrip" title="Ideological Map" href="img/us_map2.png"><img class="example-image" src="img/us_map.png" alt="Ideological Map" width="192" height="165"/></a>
							<!-- <a class="example-image-link" data-lightbox="map" title="Ideological Map"><svg id="map" alt="thumb-1" width="150" height="150"></svg></a> -->
						</div>
            			<div class="caption">
              				<h3>Ideological Map</h3>
              				<p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
            			</div><!-- caption -->
          			</div><!-- thumbnail -->
        		</div><!-- col-sm-6 col-md-4 -->

				<div class="col-sm-4 col-md-4">
          			<div class="thumbnail">
            			<div id="bar">
							<a class="img-thumbnail" data-lightbox="roadtrip" title="Bar" href="img/us_diagram2.png"><img class="example-image" src="img/us_diagram.png" alt="Bar Graph" width="192" height="150"/></a>
						</div>
            			<div class="caption">
              				<h3>Floor Diagram</h3>
              				<p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
            			</div><!-- caption -->
          			</div><!-- thumbnail -->
        		</div><!-- col-sm-6 col-md-4 -->

				<div class="col-sm-4 col-md-4">
          			<div class="thumbnail">
            			<div id="scatter">
							<a class="img-thumbnail" data-lightbox="roadtrip" title="W-Nominate" href="img/wnom2.png"><img class="example-image" src="img/wnom.png" alt="W-Nominate" width="192" height="150"/><a/>
							<!-- <a class="example-image-link" data-lightbox="roadtrip" title="W-Nominate"><svg id="scatter" xmlns="http://www.w3.org/2000/svg" version="1.1" alt="thumb-3"></svg><a/> -->
						</div>
            			<div class="caption">
              				<h3>DW-Nominate</h3>
              				<p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
            			</div><!-- caption -->
          			</div><!-- thumbnail -->
        		</div><!-- col-sm-6 col-md-4 -->

	         </div><!-- row -->
	    </div><!-- /.bs-example -->
	
	
	<!-- Example Set of Images 2 -->
	<br>
	<hr>
	
	<h3> Example 2 </h3>
	<div class="bigOne">
		<div id="map-container">
			<a class="img-thumbnail" data-lightbox="roadtrip" title="Ideological Map" href="img/us_map2.png"><img class="example-image" src="img/us_map.png" alt="Ideological Map" width="192" height="330"/></a>
			<!-- <a class="example-image-link" data-lightbox="map" title="Ideological Map"><svg id="map" alt="thumb-1" width="150" height="150"></svg></a> -->
		</div>
	</div>
	
	<div class="smallerOne">
  		<div id="bar">
			<a class="img-thumbnail" data-lightbox="roadtrip" title="Bar" href="img/us_diagram2.png"><img class="example-image" src="img/us_diagram.png" alt="Bar Graph" /></a>
		</div>
	</div>

	<div class="smallerOne">
  		<div id="scatter">
			<a class="img-thumbnail" data-lightbox="roadtrip" title="W-Nominate" href="img/wnom2.png"><img class="example-image" src="img/wnom.png" alt="W-Nominate" /><a/>
			<!-- <a class="example-image-link" data-lightbox="roadtrip" title="W-Nominate"><svg id="scatter" xmlns="http://www.w3.org/2000/svg" version="1.1" alt="thumb-3"></svg><a/> -->
		</div>
	</div>
	
	</div>
	
	 <br>
	 <br>
	
	 <div>
	 	<div align="center" data-toggle="buttons">
			<a class="btn btn-primary btn-lg" onclick="setview('search')" role="button"><span class="glyphicon glyphicon-search"></span><br>Search</a>
			<a class="btn btn-success btn-lg" onclick="setview('results')" role="button"><span class="glyphicon glyphicon-list"></span><br>Results</a>
			<a class="btn btn-warning btn-lg" onclick="setview('visualize')" role="button"><span class="glyphicon glyphicon-eye-open"></span><br>&#160 View  &#160</a>
	 	</div><!-- buttons -->
	</div><!-- jumbotron -->
	</div><!-- visualize -->
 	<br>
	<br>
	<br>
	
	<!-- FOOT -->
	<div class="container">    
	<hr>    
	<footer>
      <p>&copy; Jeffrey B. Lewis, 2013</p>
    </footer>
    </div> 


	
  </body>
</html>
