<!DOCTYPE html>
<html lang="en">
<head>
    
	<title>Vote View</title>
	
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">
	
	<link rel="shortcut icon" href="docs-assets/ico/favicon.png">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/bootstrap-theme.min.css">
	<link href="css/jumbotron-narrow.css" rel="stylesheet">
	<link href="css/jquery.dataTables.css" rel="stylesheet">
	<link rel="shortcut icon" type="image/ico" href="" />
	
	<script src="js/jquery-1.10.2.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
	<script type="text/javascript" language="javascript" src="js/libs/jquery-2.0.3.min.js"></script>
	<script type="text/javascript" language="javascript" src="js/libs/jquery.sprintf.js"></script>
	<script type="text/javascript" language="javascript" src="js/libs/jquery.dataTables.min.js"></script>
	
	<script type="text/javascript" charset="utf-8">
	$(document).ready(function() {
	    //xmakeTable("treaty");
	});
	
	makeTable = function(query) {
	        var q = encodeURIComponent(query)
	$('#example').dataTable({
	                                  "oLanguage": {"sSearch": "Filter results:"},
	                                  "bProcessing": true,
	          "bDestroy":true,
	          "sAjaxSource": $.sprintf('http://leela.sscnet.ucla.edu/voteview/searchdt?q=%s',q),
	          "aoColumns":[{"mData":"id", "sWidth": "20px", "sTitle":"ID"},
	                       {"mData":"chamber", "sWidth": "10px", "sTitle":"Chamber"},
	                       {"mData":"date", "sWidth": "85px", "sTitle":"Date"},
	                       {"mData":"yea","sTitle":"Vote","sWidth":"80px"},
	                                               {"mData":"descriptionShort", "sWidth": "200px","sTitle":"Description"}],
	          "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
	                                               $('td:eq(0)', nRow).html(
	                            $.sprintf('<a href="visualize.html?id=%s">%s</a>',aData['id'],aData['id'])).attr("title", "Click to explore this vote");
	                                               $('td:eq(3)', nRow).html(
	                            $.sprintf('%s-%s',aData['yea'],aData['no']));
	                       $('td:eq(4)', nRow).attr("title",aData['description'])
	                                               return nRow; }  
	         });
	}
	
	searchvotes = function() {
	   $('#example').empty();
	   makeTable($('#qqtext').val());
	};
	
	</script>
	
</head>

  <body>
	
	<div class="container">
      <div class="header">
        <ul class="nav nav-pills pull-right">
          <li><a href="home.html">Home</a></li>
          <li class="active"><a href="search.html">Search</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
      <h3 class="text-muted">VoteView</h3>
    </div>

    <div class="jumbotron">
      <div class="container">
        <h3 align="center">Search for Roll Calls</h3>
		<div class="col-sm-12">
      		<input type="search" class="form-control" placeholder="Search" id="qqtext" onchange="searchvotes()"></input>
		<br>
		
		<div align="center">
			<a class="btn btn-primary btn-lg" href="search.html" role="button"><span class="glyphicon glyphicon-search"></span><br>Search</a>	
			<a class="btn btn-success btn-lg" href="results.html" role="button"><span class="glyphicon glyphicon-list"></span><br>Results</a>
			<a class="btn btn-warning btn-lg" href="visualize.html" role="button"><span class="glyphicon glyphicon-eye-open"></span><br>Visualize</a>
		</div>				
	    
		</div>
      </div>
    </div>
	
	<br>
	
	<div class="table-responsive">
		<table id="example" class="table table-striped"></table>
	</div>
	
    <hr>
	
	<p></p>
	
    <footer>
      <p>&copy; Jeffrey B. Lewis, 2013</p>
    </footer>
    </div> 


  </body>
</html>
